<!DOCTYPE html>
<html>
<head>
	<title>HACK NC - Gestures</title>
</head>
<body>

<div id="Frames"></div>
<!-- Architecture -->
<script src="https://js.leapmotion.com/leap-0.6.4.js"></script>
<script src="https://js.leapmotion.com/leap-plugins-0.1.8.js"></script>

<script type="text/javascript">

//Displaying Frame
var output = document.getElementById('Frames');

Leap.loop(function (frame) {
	output.innerHTML = 'Frame: ' + frame.id;
});

//Cursor Object
var Cursor = function() {
	var cursor = this;
	//Cursor Image
	var img = document.createElement('img');
	img.src = 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/109794/cat_2.png';
	//Image positioning independent of html
	img.style.position = 'absolute';
	//Appending abs. image...
	img.onload = function () {
    	cursor.setTransform(
			[
	    		window.innerWidth/2,
	    		window.innerHeight/2
	  		],
	  		0 
      );

    document.body.appendChild(img);
  	}

	//Transforming pos. of cursor
	cursor.setTransform = function(position, rotation) {
		img.style.left = position[0] - img.width  / 2 + 'px';
		img.style.top  = position[1] - img.height / 2 + 'px';

		img.style.transform = 'rotate(' + -rotation + 'rad)';

		img.style.webkitTransform = img.style.MozTransform = img.style.msTransform =
		img.style.OTransform = img.style.transform;
	};
};

//Cursors
var cursors = {};

Leap.loop(function(frame){

	//Getting Cursors from hands
	frame.hands.forEach(function(hand,index){
		var cursor = ( cursors[index] || (cursors[index] = new Cursor()));
		//Repositioning cursors
    	cursor.setTransform(hand.screenPosition(), hand.roll());
	});
}).use('screenPosition', {scale: 0.25});

cursors[0] = new Cursor();

</script>
</body>
</html>